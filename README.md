# 🔮 Customer Churn Prediction API

This project is a full end-to-end machine learning pipeline that predicts customer churn using Telco customer data. It includes data preprocessing, model training and evaluation, and real-time prediction via a FastAPI endpoint served with Swagger UI.

---

## 📌 Project Highlights

- 📊 Data cleaning, feature encoding, and scaling
- 🧠 Trained models: Logistic Regression & Random Forest
- 🔍 Hyperparameter tuning using GridSearchCV
- 📈 Evaluation with ROC Curve & AUC
- 🚀 Deployed via FastAPI with `/predict` endpoint
- 🌐 Swagger UI automatically available at `/docs`

---

## 🛠️ Tech Stack

| Layer              | Tools & Libraries                        |
|-------------------|------------------------------------------|
| Language          | Python 3.10+                             |
| ML/EDA            | pandas, scikit-learn, numpy, matplotlib  |
| Deployment        | FastAPI, Uvicorn, Joblib                 |
| Docs              | Swagger UI (auto-generated by FastAPI)   |

---

## 🧠 ML Pipeline Overview

### 1. Data Cleaning & Encoding
- Handled nulls and invalid types in `TotalCharges`
- Label-encoded binary features
- One-hot encoded categorical multi-class features

### 2. Model Training
- Trained Logistic Regression and Random Forest
- Compared performance using precision, recall, F1, and AUC

### 3. Hyperparameter Tuning
- Used `GridSearchCV` for tuning Random Forest
- Best model saved using `joblib`

### 4. API Inference
- FastAPI app accepts 30-feature JSON input
- Predicts churn in real-time

---

## 📂 Folder Structure

customer_churn_ml/
├── app/ # FastAPI app with predict_api.py
├── data/ # Raw Telco CSV dataset
├── models/ # joblib model & scaler
├── notebooks/ # EDA & training notebooks
├── scripts/ # (optional) modular code
├── requirements.txt # Python dependencies
└── README.md # This file


---

## 🚀 Run Locally

### ✅ 1. Clone the repo

```bash
git clone https://github.com/SanduniDisanayakaCS/churn-prediction-api.git
cd churn-prediction-api

✅ 2. Set up environment

python -m venv venv
.\venv\Scripts\activate    # Windows
pip install -r requirements.txt

✅ 3. Launch the API

uvicorn app.predict_api:app --reload

Open Swagger UI at:
👉 http://127.0.0.1:8000/docs

🔍 Test Prediction
🔧 Sample JSON

{
  "features": [0, 1, 0, 1, 0, 45, 1, 0, 70.7, 151.65, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1]
}

✅ Sample Response

{
  "churn_prediction": 1
}

📊 Model Evaluation
Metric	Logistic Regression	Random Forest
Accuracy	79%	79%
AUC Score	0.83	0.82

💡 Author
Sanduni Disanayaka
🔗 GitHub: https://github.com/SanduniDisanayakaCS/churn-prediction-api
🔗 App: https://churn-prediction-api-cxkoo7ezenesva7zrr2nyd.streamlit.app/
